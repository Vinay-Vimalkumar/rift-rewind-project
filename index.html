<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rift Rewind — Riot Insights</title>
  <meta name="description" content="Rift Rewind: Riot ID lookup and champion mastery viewer." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- AOS animations (MIT) -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css">

  <style>
    :root{
      --bg:#070b12; --panel:#0d1420; --edge:#1d2a3b; --text:#e6edf5; --muted:#9fb0c6;
      --accent:#6ee7ff; --accent-2:#7c5cff; --ok:#34d399; --err:#fb7185; --gold:#fbbf24;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--text);
      background:
        radial-gradient(1200px 600px at -10% -10%, #1a2440 0%, transparent 60%),
        radial-gradient(900px 600px at 110% -10%, #1f1440 0%, transparent 60%),
        linear-gradient(180deg,#060a12 0%, #0a0f1a 60%, #070b12 100%);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px}
    header{display:flex;align-items:center;gap:14px;margin:8px 0 20px}
    .logo{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2)); box-shadow:0 6px 30px rgba(124,92,255,.4)}
    h1{font-size:28px;margin:0;letter-spacing:.2px}
    .tag{color:var(--muted);font-size:13px;margin-left:auto}

    .grid{display:grid;gap:18px}
    @media (min-width:980px){ .grid{grid-template-columns:1.05fr .95fr} }

    .card{
      background:linear-gradient(180deg,rgba(13,20,32,.9),rgba(9,14,24,.82));
      border:1px solid rgba(110,120,160,.18); border-radius:18px; padding:18px 18px 16px;
      box-shadow:0 20px 45px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04); backdrop-filter: blur(8px);
      transition:transform .18s ease, box-shadow .25s ease, border-color .2s ease;
    }
    .card:hover{transform:translateY(-1px); box-shadow:0 24px 48px rgba(124,92,255,.18)}
    label{font-size:13px;color:var(--muted);display:block;margin:0 0 8px}
    input,select,button{
      width:100%; padding:12px 14px; border-radius:14px; border:1px solid rgba(148,163,184,.18);
      background:#0a1320; color:var(--text); font-size:14px; outline:none;
      transition:border-color .15s ease, box-shadow .15s ease, transform .05s ease;
    }
    input:focus,select:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(124,92,255,.18)}
    .row{display:grid;gap:12px}
    @media(min-width:560px){ .row-2{grid-template-columns:1fr 240px} }

    .btn{
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      color:#07111a; font-weight:800; letter-spacing:.25px; cursor:pointer; border:none;
      box-shadow:0 8px 30px rgba(124,92,255,.35), inset 0 1px 0 rgba(255,255,255,.4);
      transition:transform .08s ease, filter .15s ease;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.65; cursor:not-allowed}

    .help{font-size:12px;color:var(--muted)}
    .status{min-height:18px;margin-top:8px;font-size:13px}
    .status.ok{color:var(--ok)} .status.err{color:var(--err)}

    .chipbar{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .chip{
      font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(148,163,184,.18);
      color:var(--muted); cursor:pointer; user-select:none; background:rgba(12,18,30,.6);
      transition:border-color .15s ease,color .15s ease,transform .08s ease;
    }
    .chip:hover{border-color:rgba(124,92,255,.6); color:#cfe7ff; transform:translateY(-1px)}

    .section-title{margin:10px 0 8px; font-weight:800; letter-spacing:.2px}

    .results{display:grid; gap:12px}
    .summoner{
      display:grid;gap:6px; padding:12px; border-radius:14px; background:rgba(14,22,36,.6); border:1px solid rgba(148,163,184,.14)
    }

    .kpi-grid{display:grid;gap:8px;margin-top:10px}
    @media(min-width:560px){ .kpi-grid{grid-template-columns:repeat(3,1fr)} }
    .kpi{padding:10px 12px;border-radius:12px;background:rgba(12,20,34,.6);border:1px solid rgba(148,163,184,.14)}
    .kpi .big{font-size:18px;font-weight:800}
    .kpi .sub{font-size:12px;color:var(--muted)}

    .champ-grid{display:grid; gap:12px}
    @media (min-width:560px){ .champ-grid{grid-template-columns:repeat(3,1fr)} }

    .champ{
      display:grid; grid-template-columns:44px 1fr; gap:10px; align-items:center;
      padding:12px; border-radius:14px; background:rgba(12,20,34,.6); border:1px solid rgba(148,163,184,.14);
      transition:transform .12s ease, box-shadow .2s ease;
      transform-style: preserve-3d; will-change: transform;
    }
    .champ:hover{transform:translateY(-2px) rotateX(1.2deg) rotateY(-1.2deg); box-shadow:0 10px 28px rgba(124,92,255,.18)}
    .champ img{width:44px;height:44px;border-radius:10px;border:1px solid rgba(148,163,184,.18);object-fit:cover;background:#0b1422}
    .champ .name{font-weight:700}
    .champ small{color:var(--muted)}
    .bar{height:7px;border-radius:8px;background:#0c1422;border:1px solid rgba(148,163,184,.16);overflow:hidden}
    .bar > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent-2),var(--accent));transition:width .5s ease;}

    /* two-rows of tiles below */
    .pairs{display:grid;gap:12px;margin-top:12px}
    @media(min-width:860px){ .pairs{grid-template-columns:repeat(2,1fr)} }
    .tile{padding:14px;border-radius:14px;background:rgba(12,20,34,.6);border:1px solid rgba(148,163,184,.14)}
    .tile h4{margin:0 0 8px;font-size:14px;letter-spacing:.2px}
    .list{display:grid;gap:8px}
    .rank-badge{display:inline-grid;place-items:center;width:78px;height:78px;border-radius:50%;
      background:conic-gradient(var(--gold) calc(var(--p,0)*1%), #1a2234 0); border:2px solid rgba(148,163,184,.2)}
    .rank-badge span{font-weight:800}

    /* skeletons */
    .skeleton{position:relative;overflow:hidden;background:rgba(14,22,36,.55);border-radius:14px;border:1px solid rgba(148,163,184,.12)}
    .skeleton::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.06) 45%, transparent 70%);
      transform:translateX(-100%); animation:sheen 1.1s linear infinite;
    }
    @keyframes sheen{to{transform:translateX(100%)}}

    .toast{position:fixed; right:18px; bottom:18px; background:#0f1729; border:1px solid rgba(148,163,184,.18);
      color:var(--text); padding:12px 14px; border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.35); display:none}
    .toast.ok{border-color:rgba(52,211,153,.45)} .toast.err{border-color:rgba(251,113,133,.45)}

    footer{margin-top:22px;color:var(--muted);font-size:12px;text-align:center}
    .pill{display:inline-block;padding:6px 10px;border:1px solid rgba(148,163,184,.18); border-radius:999px; font-size:12px; color:var(--muted)}

    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
    .mini{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(148,163,184,.18);background:#0a1320;color:var(--text);cursor:pointer}
    .mini:hover{border-color:rgba(124,92,255,.5)}
  </style>
</head>
<body>
  <div class="wrap">
    <header data-aos="fade-down">
      <div class="logo" aria-hidden="true"></div>
      <h1>Rift Rewind — Riot ID Lookup</h1>
      <span class="tag">serverless • global • free-tier</span>
    </header>

    <div class="grid">
      <!-- LEFT: form -->
      <section class="card" data-aos="fade-right">
        <form id="lookupForm" novalidate>
          <div class="row row-2">
            <div>
              <label for="summonerName">Riot ID</label>
              <input id="summonerName" name="summonerName" placeholder="GameName#TAG" autocomplete="off" required />
              <div class="help">Example: <code>Hide on bush#KR1</code></div>
            </div>
            <div>
              <label for="region">Region</label>
              <select id="region" name="region" required>
                <option value="na1">North America (NA1)</option>
                <option value="kr">Korea (KR)</option>
                <option value="euw1">EU West (EUW1)</option>
                <option value="eun1">EU Nordic & East (EUN1)</option>
                <option value="br1">Brazil (BR1)</option>
                <option value="la1">LAN (LA1)</option>
                <option value="la2">LAS (LA2)</option>
                <option value="jp1">Japan (JP1)</option>
                <option value="tr1">Turkey (TR1)</option>
                <option value="ru">Russia (RU)</option>
                <option value="oc1">Oceania (OC1)</option>
                <option value="ph2">Philippines (PH2)</option>
                <option value="sg2">Singapore (SG2)</option>
                <option value="th2">Thailand (TH2)</option>
                <option value="tw2">Taiwan (TW2)</option>
                <option value="vn2">Vietnam (VN2)</option>
              </select>
            </div>
          </div>

          <div class="chipbar" id="presetBar" aria-label="Pro presets"></div>

          <div class="row" style="margin-top:12px">
            <button class="btn" id="lookupBtn" type="submit">Fetch Insights</button>
            <div id="lookupStatus" class="status" role="status" aria-live="polite"></div>
          </div>
        </form>
      </section>

      <!-- RIGHT: results -->
      <section class="card" data-aos="fade-left">
        <div class="section-title">Overview</div>
        <div id="results" class="results" hidden data-aos="fade-up">
          <div id="summonerBlock" class="summoner"></div>

          <!-- KPIs -->
          <div class="kpi-grid" id="kpis" aria-hidden="true">
            <div class="kpi"><div class="big" id="kpiWinrate">—</div><div class="sub">Recent winrate</div></div>
            <div class="kpi"><div class="big" id="kpiKDA">—</div><div class="sub">Average KDA</div></div>
            <div class="kpi"><div class="big" id="kpiDuration">—</div><div class="sub">Avg game duration</div></div>
          </div>

          <div class="section-title">Top Champions</div>
          <div id="championsBlock" class="champ-grid"></div>

          <!-- two rows of tiles (only 4 tiles total) -->
          <div class="pairs">
            <div class="tile" data-aos="fade-up">
              <h4>Ranked Solo/Duo</h4>
              <div style="display:flex;align-items:center;gap:12px">
                <div class="rank-badge" id="rankBadge" style="--p:0"><span id="rankShort">—</span></div>
                <div>
                  <div id="rankLine">—</div>
                  <div class="help" id="rankLP">—</div>
                </div>
              </div>
            </div>

            <div class="tile" data-aos="fade-up">
              <h4>Recent Matches <button id="moreBtn" class="chip" style="float:right" type="button">+ more</button></h4>
              <div id="matchList" class="list"></div>
            </div>

            <div class="tile" data-aos="fade-up">
              <h4>Mastery Breakdown</h4>
              <div id="masteryBreak" class="list"></div>
            </div>

            <div class="tile" data-aos="fade-up">
              <h4>Activity</h4>
              <div id="activity" class="list"></div>
            </div>
          </div>
        </div>

        <!-- slim skeletons while loading -->
        <div id="skeletons" class="results" aria-hidden="true" hidden>
          <div class="skeleton" style="height:96px"></div>
          <div class="skeleton" style="height:120px"></div>
        </div>
      </section>
    </div>

    <footer>
      <span class="pill">AWS Lambda + Amplify</span>
      <span class="pill">Riot API (key in SSM)</span>
      <span class="pill">Champion icons © Riot — Data Dragon</span>
    </footer>
  </div>

  <!-- expose backend URL BEFORE script -->
  <script>
    window.__RIOT_API_URL__ = "https://anbqqriwd2ysbwxyquqspqg7ee0xwrcp.lambda-url.us-east-1.on.aws/";
  </script>

  <!-- AOS + Motion One (MIT) -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script type="module">
    import { animate, stagger } from "https://cdn.jsdelivr.net/npm/motion@latest/+esm";
    window.motionAnimate = animate;
    window.motionStagger = stagger;
    AOS.init({ duration: 650, easing: 'ease-out-cubic', once: true, offset: 12 });
  </script>

  <!-- your app -->
  <script src="./script.js?v=9"></script>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
</body>
</html>
